<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Predict'if</title>
        <link rel="stylesheet" href="./style/login.css" />

        <!-- Librairie Javascript: jQuery (v3.4.1) -->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    </head>


    <body class="client">
        <header>
            <div id="titre_principal">
                <div id="logo">
                    <img src="./images/logoAgence.png" alt="logo agence" />
                </div>
                <h1>Predict'if</h1>
                <div id="element">
                    <div class="boutonHeader">
                        <button id="boutonHeader">Inscription</button>
                        <button id="boutonHeader" >Connexion</button>
                    </div>
                    <div class="drapeauHeader">
                        <ul class="drapeaux">
                            <li><img src="./images/drapeau_espagnol.jpg"></li>
                            <li><img src="./images/drapeau-allemand.jpg"></li>
                            <li><img src="./images/drapeau-anglais.jpg"></li>
                            <li><img src="./images/drapeau_francais.jpg"></li>
                        </ul>

                    </div>
                </div>
            </div>

            <nav class="menu">
                <ul class="gauche">
                    <li><a href="./accueil.html">Accueil</a></li>
					<li><a href="./informations.html">Qui sommes nous?</a></li>
					<li><a href="./nos-mediums.html">Nos médiums</a></li>
					<li><a href="./astro.html">Astro</a></li>
                </ul>
                <ul class="droite">
                    <li ><a href="#">Partenaires</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </header>

        <div class="accroche">
            N’attendez plus, réservez votre 1ère consultation dès maintenant avec le medium
            qui vous correspond le mieux et obtenez la vie dont vous rêvez !!
        </div>

        <section id="accueil">
            <div id = "nos-mediums">
                ici on aura les mediums
            </div>
            
            <aside>
                <h1>
                    Consultations
                    <img id="spiraleConsultation" src="./images/spiraleConsultations.png"/>
                    </br>
                    <img id="spiraleDisponible" src="./images/spiraleDisponibles.png"/>
                    disponibles
                </h1>
                <p>Mme Irma</p>
                <p>Mr H</p>
                <p>Endora</p>
                <p>Jesé Tou</p>
            </aside>
        </section>



        <!-- Lien vers l'accueil -->
        <p><a href="index.html">Retour à la page d'Accueil</a></p>

        <footer>
            <div class="nousSuivre">
                Nous suivre :
                <img class="reseauSocial" src="./images/instagram.png"/>
                <img class="reseauSocial" src="./images/facebook.png"/>
                <img class="reseauSocial" src="./images/twitter.png"/>
                | <a href="#">CGU</a>
            </div>
        </footer>



    </body>
            <script>
            function consulterMedium(id){
                console.log(id);
                // Appel AJAX
                $.ajax({
                    url: './ActionServlet',
                    method: 'POST',
                    data: {
                        todo: 'obtenir-consultation',
                        idMedium: id
                    },
                    dataType: 'json'
                })
                .done(function (response) { // Fonction appelée en cas d'appel AJAX réussi
                    console.log('Response',response); // LOG dans Console Javascript

                })
                .fail( function (error) { // Fonction appelée en cas d'erreur lors de l'appel AJAX
                    console.log('Error',error); // LOG dans Console Javascript
                    alert("Erreur lors de l'appel AJAX");
                })
                .always( function () { // Fonction toujours appelée

                });
            }
            
            function appelAjax (){
            // Appel AJAX
                $.ajax({
                    url: './ActionServlet',
                    method: 'POST',
                    data: {
                        todo: 'nos-mediums'

                    },
                    dataType: 'json'
                })
                .done(function (response) { // Fonction appelée en cas d'appel AJAX réussi
                    console.log('Response',response); // LOG dans Console Javascript
                    var listeMediums = response.mediums;
                    $.each (listeMediums, function (i, med) {
                        $('#nos-mediums').append(
                            "<div>" + 
                            med.denomination + 
                            " : " + 
                            med.presentation + 
                            "<button onclick='consulterMedium(" + med.id + ")'>Consulter</button>" + 
                            "</div>"
                        );
                    });
                })
                .fail( function (error) { // Fonction appelée en cas d'erreur lors de l'appel AJAX
                    console.log('Error',error); // LOG dans Console Javascript
                    alert("Erreur lors de l'appel AJAX");
                })
                .always( function () { // Fonction toujours appelée

                });
            }
            
            $(document).ready(function() {
                appelAjax();
            });
        </script>
</html>

